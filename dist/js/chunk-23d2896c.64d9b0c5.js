(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23d2896c"],{"1af5":function(t,e,i){"use strict";i("994c")},"4ed1":function(t,e,i){"use strict";i("bf74")},"5e01d":function(t,e,i){},"79ed":function(t,e,i){},"994c":function(t,e,i){},a194:function(t,e,i){"use strict";i("5e01d")},b0a5:function(t,e,i){"use strict";var n=i("b6c9");e["a"]=n["a"]},bf74:function(t,e,i){},c685:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[1===t.info.sku_type?e("span",[t._v("-")]):2===t.info.sku_type?e("div",[t._v("\n    商城商品\n    "),t.info.product?e("div",[t._v("\n      【"+t._s(t.info.product.title)+"】\n    ")]):t._e()]):3===t.info.sku_type?e("span",[t._v("虚拟资产")]):t._e()])},s=[],a={name:"ISwitch",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{}},watch:{},methods:{}},r=a,c=i("2877"),o=Object(c["a"])(r,n,s,!1,null,"c7676646",null);e["a"]=o.exports},eedc:function(t,e,i){"use strict";i("79ed")},f1ea:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-index"},[e(t.current,{tag:"component",staticClass:"right"})],1)},s=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"btn-c",staticStyle:{"margin-bottom":"10px"}},[e("a-button",{staticClass:"add",attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("\n\t\t\t新增全局奖品\n\t\t")]),0==t.list_A.length?e("a-button",{staticClass:"add",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.handleCreate("A")}}},[t._v("\n\t\t\tA阵营保底奖品\n\t\t")]):e("a-button",{staticClass:"add",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(t.list_A[0])}}},[t._v("\n\t\t\t编辑A阵营保底奖品\n\t\t")]),0==t.list_B.length?e("a-button",{staticClass:"add",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.handleCreate("B")}}},[t._v("\n\t\t\tB阵营保底奖品\n\t\t")]):e("a-button",{staticClass:"add",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(t.list_B[0])}}},[t._v("\n\t\t\t编辑B阵营保底奖品\n\t\t")]),e("div",{staticStyle:{"flex-grow":"1"}})],1),e("div",{staticClass:"tips"},[t._v("\n\t\t中奖奖品会发放到用户的盒柜仓库中\n\t")]),e("a-table",{staticClass:"product-table",attrs:{rowKey:function(t){return t.id},dataSource:t.list,bordered:"",pagination:!1,size:"small"}},[e("a-table-column",{attrs:{title:"序号",width:"20px"},scopedSlots:t._u([{key:"default",fn:function(i,n,s){return[e("div",[t._v(t._s(s+1))])]}}])}),e("a-table-column",{key:"thumb",attrs:{title:"图片",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("img",{staticClass:"thumb",staticStyle:{"margin-right":"10px"},attrs:{src:i.thumb}}),e("div",[t._v("\n\t\t\t\t\t\t"+t._s(i.title)+" "),e("br"),t._v("\n\t\t\t\t\t\t"+t._s(i.number)+"\n\t\t\t\t\t")])])]}}])}),e("a-table-column",{key:"number",attrs:{title:"类型",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{style:{color:"A"==i.prize_type||"B"==i.prize_type?"#F04646":""}},[t._v(t._s("A"==i.prize_type?"A阵营保底":"B"==i.prize_type?"B阵营保底":"全局奖品"))])]}}])}),e("a-table-column",{key:"number",attrs:{title:"价值",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("div",[e("PriceDisplay",{attrs:{info:t}})],1)]}}])}),e("a-table-column",{attrs:{title:"总库存",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v("\n\t\t\t\t\t"+t._s(i.stock)+"件\n\t\t\t\t")])]}}])}),e("a-table-column",{attrs:{title:"SKU类型",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("ISkuType",{attrs:{info:t}})]}}])}),e("a-table-column",{attrs:{title:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handleEdit(i)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handleDelete(i)}}},[t._v("删除")])]}}])})],1)],1)},r=[],c=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),o=i("7971"),u=i("7cc6"),l=i("c685");function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){Object(c["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={components:{UploadImages:o["a"],iSwitch:u["a"],ISkuType:l["a"]},props:{info:{type:Object,default:function(){return{}}}},data:function(){return{list_A:[],list_B:[],list:[],frame:[{title:"奖品类型",type:"text",key:"prize_type",text:this.text},{title:"SKU类型",key:"sku_type",type:"radio",default:1,required:!0,options:[{title:"无绑定",value:1},{title:"绑定商城中的商品",value:2},{title:"平台虚拟资产",value:3}],tips:""},{title:"绑定商品",key:"product_id",type:"product_id",auto_fill_fields:{title:"title",thumb:"thumb",number:"number",money_price:"money_price",score_price:"score_price"},where:{sku_type:2}},{title:"绑定虚拟资产",key:"assets",type:"assets",where:{sku_type:3}},{title:"奖品名称",key:"title",required:!0,placeholder:'如"积分礼包1"'},{title:"编号",key:"number",placeholder:"填写编号方便在订单中对应货物"},{title:"封面",key:"thumb",type:"image",isShowImageTips:!1,required:!0,tips:"建议800*800，发放后会显示在中奖者的物品仓库中"},{title:"价值",key_prefix:"",type:"mix_price",tips:"价值用于返售时作为返售原价进行折扣计算",newline:!0,required:!0},{title:"总库存",key:"stock",type:"number",tips:"总库存应该大于等于 每期抽取数量 * 期数",suffix:"份",required:!0}]}},watch:{uuid:function(){this.initList()}},created:function(){this.initList()},methods:{initList:function(){this.my_initList("A"),this.my_initList("B"),this.my_initList()},my_initList:function(t){var e=this,i={};i=t?{prize_type:t}:{},this.$http.get("/pk/skus",{params:i}).then((function(i){t?e["list_"+t]=i.data.list:e.list=i.data.list}))},handleCreate:function(t){var e=this,i={};"A"==t?(this.$set(this.frame[0],"text","A阵营保底奖品"),i={title:"创建A阵营保底奖品",frame:this.frame,prize_type:"A"}):"B"==t?(this.$set(this.frame[0],"text","B阵营保底奖品"),i={title:"创建B阵营保底奖品",frame:this.frame,prize_type:"B"}):(this.$set(this.frame[0],"text","全局奖品"),i={title:"新增活动奖品",frame:this.frame}),this.$iForm.show(f(f({},i),{},{success:function(i){var n={};n="A"==t?{prize_type:"A"}:"B"==t?{prize_type:"B"}:{prize_type:"N"},e.$http.post("/pk/skus",f(f({},i),n)).then((function(t){e.initList(),e.$iForm.hide()}))}}))},handleEdit:function(t){var e=this,i=t.prize_type,n={};"A"==i?(this.$set(this.frame[0],"text","A阵营保底奖品"),n={title:"编辑A阵营保底奖品",frame:this.frame,prize_type:"A"}):"B"==i?(this.$set(this.frame[0],"text","B阵营保底奖品"),n={title:"编辑B阵营保底奖品",frame:this.frame,prize_type:"B"}):(this.$set(this.frame[0],"text","全局奖品"),n={title:"编辑全局奖品",frame:this.frame}),this.$iForm.show(f(f({},n),{},{form:t,success:function(i){e.$http.put("/pk/skus/".concat(t.uuid),{type:"update",attributes:i}).then((function(t){e.initList(),e.$iForm.hide()}))}}))},handleCancel:function(){this.$emit("refresh"),this.$emit("close")},handleSave:function(){this.$emit("refresh"),this.$emit("close")},handleDelete:function(t){var e=this;this.$confirm({title:"提示",content:"确认删除吗？",onOk:function(){e.$http.delete("/pk/skus/".concat(t.uuid)).then((function(t){e.$message.success("删除成功"),e.initList()}))}})}}},h=d,m=(i("1af5"),i("a194"),i("2877")),y=Object(m["a"])(h,a,r,!1,null,"7c60677e",null),_=y.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("IForm",{staticClass:"form-container",attrs:{formFrame:t.frame,labelWidth:"200px",formData:t.form},on:{"update:formData":function(e){t.form=e},"update:form-data":function(e){t.form=e}}}),e("div",{attrs:{slot:"action"},slot:"action"},[e("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")])],1)],1)},v=[],k=i("b0a5"),g="pk_base",w={components:{IForm:k["a"]},data:function(){return{uuid:"",form:{banner:[]},categoryList:[]}},computed:{categoryOptions:function(){return this.categoryList.map((function(t){return{title:t.title,value:t.id}}))},frame:function(){return[{title:"全局赏规则说明",key:"html",type:"textarea",span:23,isShowImageTips:!1,placeholder:"请输入",newline:!0},{title:"PK规则说明",key:"pkhtml",type:"textarea",span:23,isShowImageTips:!1,placeholder:"请输入",newline:!0}]}},created:function(){var t=this;this.$http.get("/setting/sys/".concat(g)).then((function(e){t.form=e.data.setting||{}}))},mounted:function(){},watch:{},methods:{cancel:function(){this.$router.back(-1)},submit:function(){var t=this;this.$http.post("/setting/sys/".concat(g),{setting:this.form}).then((function(e){t.$message.success("保存成功")}))}}},x=w,S=(i("eedc"),Object(m["a"])(x,b,v,!1,null,"0425681a",null)),O=S.exports,$={components:{skuLevel:_,Base:O},data:function(){return{current:"Base",list:[{title:"基础设置",key:"Base"},{title:"奖品设置",key:"skuLevel"}]}},computed:{},created:function(){},mounted:function(){},watch:{},methods:{}},B=$,j=(i("4ed1"),Object(m["a"])(B,n,s,!1,null,"39e43608",null));e["default"]=j.exports}}]);